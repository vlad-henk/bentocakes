<%# app/views/carts/show.html.erb %>
<div class="min-h-screen bg-gradient-to-b from-pink-50 to-white">
  <%= render 'shared/navbar' %>
  
  <div class="container mx-auto px-4 py-8">
    <!-- –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ -->
    <nav class="flex space-x-2 text-sm text-rose-600 mb-8">
      <%= link_to '–ì–æ–ª–æ–≤–Ω–∞', root_path, class: 'hover:text-rose-800' %>
      <span>/</span>
      <span class="text-rose-900 font-medium">–ö–æ—Ä–∑–∏–Ω–∞</span>
    </nav>
    
    <h1 class="text-4xl font-bold text-rose-900 mb-8">–ö–æ—à–∏–∫</h1>
    
    <% if @cart.cart_items.any? %>
      <div class="grid lg:grid-cols-3 gap-8">
        <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ -->
        <div class="lg:col-span-2">
          <div class="bg-white rounded-3xl shadow-lg p-6">
            <div class="space-y-6">
              <% @cart.cart_items.each do |item| %>
                <div class="flex items-center space-x-4 p-4 border-b border-rose-100 last:border-0">
                  <!-- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É -->
                  <div class="w-24 h-24 bg-gradient-to-br from-rose-100 to-amber-100 rounded-xl flex items-center justify-center">
                    <span class="text-3xl">üéÇ</span>
                  </div>
                  
                  <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–æ–≤–∞—Ä -->
                  <div class="flex-1">
                    <h3 class="font-bold text-lg text-rose-900"><%= item.product.name %></h3>
                    <p class="text-rose-600 text-sm"><%= item.product.description %></p>
                    <div class="flex items-center justify-between mt-2">
                      <div class="flex items-center space-x-4">
                        <!-- –ö—ñ–ª—å–∫—ñ—Å—Ç—å -->
                    <div class="flex items-center border border-rose-200 rounded-full">
                      <%= form_tag(remove_item_cart_path(item_id: item.id), method: :delete) do %>
                        <%= submit_tag '-', class: 'px-3 py-1 text-rose-600 hover:bg-rose-50 rounded-l-full cursor-pointer' %>
                      <% end %>
                      
                      <span class="px-3 py-1"><%= item.quantity %></span>
                      
                      <%= form_tag(add_item_cart_path(product_id: item.product.id), method: :post) do %>
                        <%= submit_tag '+', class: 'px-3 py-1 text-rose-600 hover:bg-rose-50 rounded-r-full cursor-pointer' %>
                      <% end %>
                    </div>
                        
                        <!-- –¶—ñ–Ω–∞ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é -->
                        <span class="text-rose-700"><%= item.product.price %> ‚Ç¥</span>
                      </div>
                      
                      <!-- –°—É–º–∞ —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è -->
                      <div class="flex items-center space-x-4">
                        <span class="text-xl font-bold text-amber-600"><%= item.total_price %> ‚Ç¥</span>
                        <%= button_to '√ó', remove_item_cart_path(item_id: item.id), 
                              method: :delete,
                              data: { confirm: '–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ç–æ–≤–∞—Ä?' },
                              class: 'text-rose-400 hover:text-rose-600 text-2xl' %>
                      </div>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π -->
            <div class="flex justify-between items-center mt-8 pt-6 border-t border-rose-100">
              <%= link_to '‚Üê –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–∫—É–ø–∫–∏', products_path, 
                    class: 'text-rose-600 hover:text-rose-800 font-medium' %>
              <%= button_to '–û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—Ä–∑–∏–Ω—É', cart_path, 
                    method: :delete,
                    data: { confirm: '–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—é –∫–æ—Ä–∑–∏–Ω—É?' },
                    class: 'text-rose-400 hover:text-rose-600 font-medium' %>
            </div>
          </div>
        </div>
        
        <!-- –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
        <div class="lg:col-span-1">
          <div class="bg-white rounded-3xl shadow-lg p-6 sticky top-24">
            <h2 class="text-2xl font-bold text-rose-900 mb-6">–î–µ—Ç–∞–ª—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
            
            <!-- –ü—ñ–¥—Å—É–º–æ–∫ -->
            <div class="space-y-4 mb-6">
              <div class="flex justify-between">
                <span class="text-rose-700">–¢–æ–≤–∞—Ä–∏:</span>
                <span class="font-medium"><%= @cart.total_items %> —à—Ç.</span>
              </div>              
              <div class="border-t border-rose-200 pt-4">
                <div class="flex justify-between text-lg font-bold">
                  <span class="text-rose-900">–í—Å—å–æ–≥–æ:</span>
                  <span class="text-amber-600"><%= @cart.total_price%> ‚Ç¥</span>
                </div>
              </div>
            </div>
            
            <!-- –ü—Ä–∏–º—ñ—Ç–∫–∞ -->
            <div class="mb-6">
              <label class="block text-rose-700 mb-2">–ü—Ä–∏–º—ñ—Ç–∫–∞ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</label>
              <textarea class="w-full border border-rose-200 rounded-xl p-3 focus:border-rose-300 focus:ring focus:ring-rose-100" 
                        rows="3" placeholder="–í–∞—à—ñ –ø–æ–±–∞–∂–∞–Ω–Ω—è..."></textarea>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è -->
            <%= link_to '–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è', new_order_path, 
                  class: 'block w-full bg-gradient-to-r from-rose-500 to-pink-600 text-white text-center font-bold py-4 rounded-xl hover:shadow-xl transition shadow-lg' %>
            
            <!-- –ë–µ–∑–ø–µ–∫–∞ -->
            <div class="mt-6 text-center">
              <div class="flex justify-center space-x-4 text-rose-400 mb-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                </svg>
                <span>–ë–µ–∑–ø–µ—á–Ω–∞ –æ–ø–ª–∞—Ç–∞</span>
              </div>
              <p class="text-xs text-rose-500">–í–∞—à—ñ –¥–∞–Ω—ñ –∑–∞—Ö–∏—â–µ–Ω—ñ</p>
            </div>
          </div>
        </div>
      </div>
    <% else %>
      <!-- –ü—É—Å—Ç–∞ –∫–æ—Ä–∑–∏–Ω–∞ -->
      <div class="text-center py-16">
        <div class="text-8xl mb-6">üõí</div>
        <h2 class="text-3xl font-bold text-rose-900 mb-4">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</h2>
        <p class="text-rose-700 mb-8 max-w-md mx-auto">–î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ –¥–æ –∫–æ—Ä–∑–∏–Ω–∏, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
        <%= link_to '–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –º–µ–Ω—é', products_path, 
              class: 'inline-block bg-gradient-to-r from-rose-500 to-pink-600 text-white font-bold py-3 px-8 rounded-full hover:shadow-xl transition' %>
      </div>
    <% end %>
  </div>
  
  <%= render 'shared/footer' %>
</div>