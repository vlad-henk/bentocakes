<div class="min-h-screen w-full bg-gradient-to-b from-pink-50 to-white">
  <%= render 'shared/navbar' %>
  
  <div class="container mx-auto px-4 py-8">
    <!-- –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ -->
    <nav class="flex space-x-2 text-sm text-rose-600 mb-8">
      <%= link_to '–ì–æ–ª–æ–≤–Ω–∞', root_path, class: 'hover:text-rose-800' %>
      <span>/</span>
      <%= link_to '–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è', orders_path, class: 'hover:text-rose-800' %>
      <span>/</span>
      <span class="text-rose-900 font-medium">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #<%= @order.id %></span>
    </nav>
    
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
      <div class="lg:w-2/3">
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
          <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
              <h1 class="text-3xl font-bold text-rose-900">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #<%= @order.id %></h1>
              <p class="text-rose-600 mt-2">
                –°—Ç–≤–æ—Ä–µ–Ω–æ: <%= l(@order.created_at, format: :long) rescue @order.created_at.strftime("%d.%m.%Y %H:%M") %>
              </p>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å -->
            <div class="mt-4 md:mt-0">
              <% 
                status_classes = case @order.status
                when 'pending'
                  'bg-yellow-100 text-yellow-800'
                when 'processing'
                  'bg-blue-100 text-blue-800'
                when 'shipped'
                  'bg-indigo-100 text-indigo-800'
                when 'delivered'
                  'bg-green-100 text-green-800'
                when 'cancelled'
                  'bg-red-100 text-red-800'
                else
                  'bg-gray-100 text-gray-800'
                end
                
                status_text = case @order.status
                when 'pending'
                  '–û—á—ñ–∫—É—î –æ–±—Ä–æ–±–∫–∏'
                when 'processing'
                  '–í –æ–±—Ä–æ–±—Ü—ñ'
                when 'shipped'
                  '–í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ'
                when 'delivered'
                  '–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ'
                when 'cancelled'
                  '–°–∫–∞—Å–æ–≤–∞–Ω–æ'
                else
                  '–ù–µ–≤—ñ–¥–æ–º–∏–π —Å—Ç–∞—Ç—É—Å'
                end
              %>
              
              <span class="px-6 py-3 rounded-full text-lg font-medium <%= status_classes %>">
                <%= status_text %>
              </span>
            </div>
          </div>
          
          <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ -->
          <h2 class="text-2xl font-bold text-rose-900 mb-6">–¢–æ–≤–∞—Ä–∏ –≤ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—ñ</h2>
          
          <div class="space-y-4">
            <% @order.order_items.each do |item| %>
              <div class="flex items-center p-4 border-b border-rose-100 last:border-0">
                <div class="w-16 h-16 bg-gradient-to-br from-rose-100 to-amber-100 rounded-lg flex items-center justify-center mr-4">
                  <span class="text-2xl">
                    <% 
                      emoji = case item.product.category
                      when 'cakes'
                        'üéÇ'
                      when 'cupcakes'
                        'üßÅ'
                      when 'macarons'
                        'üç™'
                      else
                        'üç∞'
                      end
                    %>
                    <%= emoji %>
                  </span>
                </div>
                
                <div class="flex-1">
                  <h4 class="font-bold text-rose-900"><%= item.product.name %></h4>
                  <p class="text-rose-600 text-sm"><%= item.product.description.truncate(50) %></p>
                </div>
                
                <div class="text-right">
                  <div class="flex items-center space-x-4">
                    <span class="text-rose-700">
                      <%= item.quantity %> √ó <%= number_to_currency(item.price, unit: '‚Ç¥', format: '%n %u') %>
                    </span>
                    <span class="font-bold text-amber-600">
                      <%= number_to_currency(item.total_price, unit: '‚Ç¥', format: '%n %u') %>
                    </span>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
        
        <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
        <div class="bg-white rounded-3xl shadow-xl p-8">
          <h2 class="text-2xl font-bold text-rose-900 mb-6">–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h2>
          
          <% if @order.notes.present? %>
            <div class="mb-6">
              <h3 class="font-bold text-rose-800 mb-2">–í–∞—à—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏:</h3>
              <div class="bg-rose-50 rounded-xl p-4">
                <p class="text-rose-700"><%= @order.notes %></p>
              </div>
            </div>
          <% end %>
          
          <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="font-bold text-rose-800 mb-2">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h3>
              <div class="space-y-2 text-rose-700">
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <%= @order.phone %></p>
                <p><strong>Email:</strong> <%= @order.user.email %></p>
              </div>
            </div>
            
            <div>
              <h3 class="font-bold text-rose-800 mb-2">–î–æ—Å—Ç–∞–≤–∫–∞</h3>
              <div class="space-y-2 text-rose-700">
                <p><strong>–ê–¥—Ä–µ—Å–∞:</strong> <%= @order.delivery_address %></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- –ü–∞–Ω–µ–ª—å –∑ –ø—ñ–¥—Å—É–º–∫–æ–º -->
      <div class="lg:w-1/3">
        <div class="bg-white rounded-3xl shadow-xl p-8 sticky top-24">
          <h2 class="text-2xl font-bold text-rose-900 mb-6">–ü—ñ–¥—Å—É–º–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
          
          <div class="space-y-4 mb-6">
            <div class="flex justify-between">
              <span class="text-rose-700">–¢–æ–≤–∞—Ä–∏:</span>
              <span class="font-medium"><%= @order.items_count %> —à—Ç.</span>
            </div>
            <div class="flex justify-between">
              <span class="text-rose-700">–í–∞—Ä—Ç—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤:</span>
              <span class="font-medium">
                <%= number_to_currency(@order.total, unit: '‚Ç¥', format: '%n %u') %>
              </span>
            </div>
            

            <div class="border-t border-rose-200 pt-4">
              <div class="flex justify-between text-lg font-bold">
                <span class="text-rose-900">–î–æ —Å–ø–ª–∞—Ç–∏:</span>
                <span class="text-amber-600">
                  <%= number_to_currency(@order.total, unit: '‚Ç¥', format: '%n %u') %>
                </span>
              </div>
            </div>
          </div>
          
          <!-- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π -->
          <div class="space-y-4">
            <%= link_to '–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω—å', orders_path,
                  class: 'block w-full border-2 border-rose-600 text-rose-600 text-center font-medium py-3 rounded-xl hover:bg-rose-50 transition' %>
            
            <%= link_to '–ó–≤\'—è–∑–∞—Ç–∏—Å—è –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é', contact_path,
                  class: 'block w-full bg-rose-100 text-rose-700 text-center font-medium py-3 rounded-xl hover:bg-rose-200 transition' %>
          </div>
          
          <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É -->
          <div class="mt-8 pt-6 border-t border-rose-100">
            <div class="flex items-center text-rose-600 mb-2">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
              </svg>
              <span class="font-medium">–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞?</span>
            </div>
            <p class="text-sm text-rose-500">
              –ó–∞–ø–∏—Ç–∞–Ω–Ω—è —â–æ–¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è? –¢–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ –Ω–∞–º: 
              <a href="tel:+380671234567" class="text-rose-600 hover:text-rose-800">+38 (067) 123-45-67</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <%= render 'shared/footer' %>
</div>
